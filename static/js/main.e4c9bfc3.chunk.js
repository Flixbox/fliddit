(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{104:function(e,t,a){e.exports=a(143)},143:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),c=a(10),o=a.n(c),l=a(14),i=a(194),u=a(192),s=a(178),d=a(185),m=a(32),p=a(42),f=a(189),E=a(175),b=a(176),v=a(147),y=a(177),h=function(e){var t=e.title,a=e.subtitle,n=e.route,c=void 0===n?"/":n;return r.a.createElement(m.b,{to:c,replace:!0},r.a.createElement(v.a,{button:!0},r.a.createElement(y.a,{primary:t,secondary:a})))},g=Object(l.b)(function(e){return{categories:e.categories}})(function(e){var t=e.categories;return r.a.createElement(f.a,{variant:"permanent",open:!0},r.a.createElement(E.a,null,r.a.createElement(h,{title:"FLIDDIT",subtitle:"A social platform"}),r.a.createElement(b.a,null),t.map(function(e){return r.a.createElement(h,{title:e.name,key:e.name,route:"/".concat(e.path)})})))}),O=a(20),j=a(72),S=a(186),w=a(190),C=a(179),N=a(193),k=a(187),T=a(180),D=a(181),x=a(13),I=a(69),L=a(45),q="LOAD_POSTS",A="VOTE_POST",W="ADD_POST",M="EDIT_POST",_="DELETE_POST";function P(e){var t=e.id,a=e.option;return{type:A,payload:{request:{method:"POST",url:"/posts/".concat(t),data:{id:t,option:a}}}}}var R=Object(d.a)(function(e){return{formControl:{minWidth:120,margin:e.spacing(1)}}}),F=function(e){var t=e.post,a=e.sortClick,n=e.sorting,c=Object.keys(t);return r.a.createElement(r.a.Fragment,null,r.a.createElement(j.a,null,"Sort by: "),c.map(function(e){return r.a.createElement(U,{field:e,sortClick:a,key:e,sorting:n})}))},U=function(e){var t=e.field,a=e.sortClick,n=e.sorting,c=t;return r.a.createElement(D.a,{onClick:function(){return a(c)}},c," ",function(e){var t=e.direction,a=e.field;return c===a&&("desc"===t?r.a.createElement(x.a,{icon:"arrow-circle-down"}):r.a.createElement(x.a,{icon:"arrow-circle-up"}))}(n))},V=Object(l.b)(function(e){return{categories:e.categories,dispatch:e.dispatch}})(Object(p.f)(function(e){var t=e.dispatch,a=e.match,c=e.posts,o=e.categories,l=e.category,i=R(),u=Object(n.useState)({direction:"desc",field:"timestamp"}),d=Object(O.a)(u,2),m=d[0],p=d[1],f=Object(n.useState)(""),E=Object(O.a)(f,2),b=E[0],v=E[1],y=Object(n.useState)(""),h=Object(O.a)(y,2),g=h[0],D=h[1],x=Object(n.useState)(l),q=Object(O.a)(x,2),A=q[0],M=q[1],_=Object(n.useState)(!1),P=Object(O.a)(_,2),U=P[0],V=P[1],z=function(){if(!b)return null;t(function(e){var t=e.title,a=e.body,n=e.category;return{type:W,payload:{request:{method:"POST",url:"/posts",data:{id:Object(I.v4)(),timestamp:new Date,title:t,body:a,author:L.b,category:n}}}}}({title:g,body:b,category:A})).then(function(e){return e.type==="".concat(W,"_SUCCESS")?(D(""),v(""),void M(l)):V(!0)})};Object(n.useEffect)(function(){A||(a.params.category?M(a.params.category):o[0]&&M(o[0].name))},[A,o,a.params.category]);var B=Object.keys(c).length>0||null;return r.a.createElement(s.a,{container:!0,spacing:1},c.length?r.a.createElement(r.a.Fragment,null,r.a.createElement(s.a,{item:!0,xs:12},B&&r.a.createElement(F,{post:c[Object.keys(c)[0]],sortClick:function(e){p({field:e,direction:"desc"===m.direction?"asc":"desc"})},sorting:m})),B&&Object.keys(c).sort(function(e,t){var a=m.direction,n=m.field,r=c[e],o=c[t];return"asc"===a?r[n]<o[n]?1:-1:o[n]<r[n]?1:-1}).map(function(e){return r.a.createElement(s.a,{item:!0,xs:12,lg:6,key:e},r.a.createElement(H,Object.assign({},c[e],{linkingCard:!0})))})):r.a.createElement(j.a,null,"No Posts found!"),r.a.createElement(s.a,{item:!0,xs:12},r.a.createElement(S.a,{mt:1},r.a.createElement(de,{onSubmit:z,retryMode:U,onRetry:z},r.a.createElement(w.a,{fullWidth:!0,value:g,onChange:function(e){return D(e.target.value)},placeholder:"Give your post a title...",className:i.formControl}),r.a.createElement(w.a,{fullWidth:!0,value:b,onChange:function(e){return v(e.target.value)},placeholder:"Write a post body...",className:i.formControl}),r.a.createElement(C.a,{className:i.formControl},r.a.createElement(N.a,{htmlFor:"category"},"Category"),A&&r.a.createElement(k.a,{value:A,onChange:function(e){return M(e.target.value)},inputProps:{id:"category"},autoWidth:!0,style:{minWidth:"fit-content"}},o.map(function(e){return r.a.createElement(T.a,{value:e.path,key:e.path},e.name)})))))))})),z=a(182),B=a(183),G=a(195),J=a(126),$=Object(d.a)(function(e){return{details:{display:"flex",flexDirection:"column"},top:{display:"flex",flexDirection:"row"},content:{padding:e.spacing(1),width:"100%"},chip:{marginRight:e.spacing(1)}}}),H=Object(l.b)(function(e){return e})(function(e){var t=e.dispatch,a=e.linkingCard,c=e.author,o=e.body,l=e.category,i=e.commentCount,u=e.deleted,s=e.id,d=e.timestamp,p=e.title,f=e.voteScore,E=$(),b=Object(n.useState)("Loading title..."),v=Object(O.a)(b,2),y=v[0],h=v[1],g=Object(n.useState)("Loading body..."),C=Object(O.a)(g,2),N=C[0],k=C[1],T=Object(n.useState)(!1),D=Object(O.a)(T,2),I=D[0],L=D[1],q=function(e){var t=e.title,a=e.body;t&&h(t),a&&k(a)};return Object(n.useEffect)(function(){q({title:p,body:o})},[p,o]),u?null:r.a.createElement(z.a,null,r.a.createElement(S.a,{className:E.details},r.a.createElement(S.a,{className:E.top},r.a.createElement(S.a,{className:E.voteControls},r.a.createElement(oe,{voteScore:f,upvote:function(){return t(P({id:s,option:"upVote"}))},downvote:function(){return t(P({id:s,option:"downVote"}))}})),r.a.createElement(S.a,{className:E.content,component:a&&!I?m.b:S.a,to:a&&"/".concat(l,"/").concat(s)},I?r.a.createElement(r.a.Fragment,null,r.a.createElement(w.a,{value:y,onChange:function(e){return h(e.target.value)},fullWidth:!0}),r.a.createElement(w.a,{value:N,onChange:function(e){return k(e.target.value)},fullWidth:!0})):r.a.createElement(r.a.Fragment,null,r.a.createElement(j.a,{variant:"h5"},y),r.a.createElement(j.a,{variant:"subtitle1",color:"textSecondary"},N))),r.a.createElement(ue,{editMode:I,onSave:function(){L(!1),t(function(e){var t=e.id,a=e.title,n=e.body;return{type:M,payload:{request:{method:"PUT",url:"/posts/".concat(t),data:{id:t,title:a,body:n}}}}}({id:s,title:y,body:N}))},onCancel:function(){L(!1),q({title:p,body:o})},onEdit:function(){return L(!0)},onTrash:function(){return t(function(e){var t=e.id;return{type:_,payload:{request:{method:"DELETE",url:"/posts/".concat(t),data:{id:t}}}}}({id:s}))}})),r.a.createElement(B.a,null,r.a.createElement(G.a,{className:E.chip,avatar:r.a.createElement(J.a,null,r.a.createElement(x.a,{icon:"user"})),label:c}),r.a.createElement(G.a,{className:E.chip,avatar:r.a.createElement(J.a,null,r.a.createElement(x.a,{icon:"tag"})),label:"".concat(l)}),r.a.createElement(G.a,{className:E.chip,avatar:r.a.createElement(J.a,null,r.a.createElement(x.a,{icon:"comments"})),label:i}),r.a.createElement(G.a,{className:E.chip,avatar:r.a.createElement(J.a,null,r.a.createElement(x.a,{icon:"calendar"})),label:new Date(d).toLocaleDateString()}))))}),K="LOAD_COMMENT_SECTION",Q="VOTE_COMMENT",X="ADD_COMMENT",Y="EDIT_COMMENT",Z="DELETE_COMMENT";function ee(e){var t=e.id,a=e.option;return{type:Q,payload:{request:{method:"POST",url:"/comments/".concat(t),data:{id:t,option:a}}}}}var te=Object(l.b)(function(e){return e})(function(e){var t=e.dispatch,a=e.comments,c=e.postId,o=Object(n.useState)(""),l=Object(O.a)(o,2),i=l[0],u=l[1],s=Object(n.useState)(!1),d=Object(O.a)(s,2),m=d[0],p=d[1],f=function(){if(!i)return null;t(function(e){var t=e.body,a=e.parentId;return{type:X,payload:{request:{method:"POST",url:"/comments",data:{id:Object(I.v4)(),timestamp:new Date,body:t,author:L.b,parentId:a}}}}}({body:i,parentId:c})).then(function(e){return e.type==="".concat(X,"_SUCCESS")?u(""):p(!0)})};return r.a.createElement(S.a,null,a.map(function(e){return r.a.createElement(S.a,{mt:1,key:e.id},r.a.createElement(ne,e))}),r.a.createElement(S.a,{mt:1},r.a.createElement(de,{onSubmit:f,retryMode:m,onRetry:f},r.a.createElement(w.a,{fullWidth:!0,value:i,onChange:function(e){return u(e.target.value)},placeholder:"Write a comment..."}))))}),ae=Object(d.a)(function(e){return{details:{display:"flex",flexDirection:"column"},top:{display:"flex",flexDirection:"row"},editControls:{marginLeft:"auto"},content:{padding:e.spacing(1),width:"100%"},chip:{marginRight:e.spacing(1)}}}),ne=Object(l.b)(function(e){return e})(function(e){var t=e.dispatch,a=e.author,c=e.body,o=e.deleted,l=e.id,i=(e.parentDeleted,e.parentId,e.timestamp),u=e.voteScore,s=ae(),d=Object(n.useState)("Loading body..."),m=Object(O.a)(d,2),p=m[0],f=m[1],E=Object(n.useState)(!1),b=Object(O.a)(E,2),v=b[0],y=b[1],h=function(e){var t=e.body;t&&f(t)};return Object(n.useEffect)(function(){h({body:c})},[c]),o?null:r.a.createElement(z.a,null,r.a.createElement(S.a,{className:s.details},r.a.createElement(S.a,{className:s.top},r.a.createElement(S.a,{className:s.voteControls},r.a.createElement(oe,{voteScore:u,upvote:function(){return t(ee({id:l,option:"upVote"}))},downvote:function(){return t(ee({id:l,option:"downVote"}))}})),r.a.createElement(S.a,{className:s.content},v?r.a.createElement(w.a,{value:p,onChange:function(e){return f(e.target.value)},fullWidth:!0}):r.a.createElement(j.a,{variant:"subtitle1"},p)),r.a.createElement(ue,{editMode:v,onSave:function(){y(!1),t(function(e){var t=e.id,a=e.body;return{type:Y,payload:{request:{method:"PUT",url:"/comments/".concat(t),data:{id:t,body:a}}}}}({id:l,body:p}))},onCancel:function(){y(!1),h({body:c})},onEdit:function(){return y(!0)},onTrash:function(){return t(function(e){var t=e.id;return{type:Z,payload:{request:{method:"DELETE",url:"/comments/".concat(t),data:{id:t}}}}}({id:l}))}})),r.a.createElement(B.a,null,r.a.createElement(G.a,{className:s.chip,size:"small",avatar:r.a.createElement(J.a,null,r.a.createElement(x.a,{icon:"user"})),label:a}),r.a.createElement(G.a,{className:s.chip,size:"small",avatar:r.a.createElement(J.a,null,r.a.createElement(x.a,{icon:"calendar"})),label:new Date(i).toLocaleDateString()}))))}),re=a(184),ce=Object(d.a)(function(e){return{root:{display:"flex",flexDirection:"column",alignItems:"center"}}}),oe=function(e){var t=e.voteScore,a=e.upvote,n=e.downvote,c=ce();return r.a.createElement(S.a,{className:c.root},r.a.createElement(re.a,{onClick:a},r.a.createElement(x.a,{icon:"arrow-circle-up"})),r.a.createElement(j.a,null,t),r.a.createElement(re.a,{onClick:n},r.a.createElement(x.a,{icon:"arrow-circle-down"})))},le=a(145),ie=Object(d.a)(function(e){return{editControls:{marginLeft:"auto",display:"flex",flexDirection:"row",height:"fit-content"},icon:{margin:e.spacing(1)}}}),ue=function(e){var t=e.editMode,a=e.retryMode,n=e.onSave,c=e.onCancel,o=e.onEdit,l=e.onTrash,i=e.onRetry,u=ie(),s=Object(le.a)();return r.a.createElement(S.a,{className:u.editControls,m:1},a&&r.a.createElement(D.a,{onClick:i},r.a.createElement(j.a,{color:"error"},"Retry?"),r.a.createElement(x.a,{icon:"sync",className:u.icon,color:s.palette.error.main})),t?r.a.createElement(r.a.Fragment,null,r.a.createElement(D.a,{onClick:n},"Save",r.a.createElement(x.a,{icon:"save",className:u.icon})),r.a.createElement(D.a,{onClick:c},"Cancel",r.a.createElement(x.a,{icon:"window-close",className:u.icon}))):r.a.createElement(r.a.Fragment,null,r.a.createElement(D.a,{onClick:o},"Edit",r.a.createElement(x.a,{icon:"edit",className:u.icon})),r.a.createElement(D.a,{onClick:l},"Delete",r.a.createElement(x.a,{icon:"trash",className:u.icon}))))},se=Object(d.a)(function(e){return{details:{display:"flex",flexDirection:"row"},editControls:{marginLeft:"auto"},content:{padding:e.spacing(1),width:"100%"},icon:{margin:e.spacing(1)}}}),de=Object(l.b)(function(e){return e})(function(e){var t=e.children,a=e.retryMode,n=e.onSubmit,c=e.onRetry,o=se(),l=Object(le.a)();return r.a.createElement(z.a,null,r.a.createElement(S.a,{className:o.details},r.a.createElement(S.a,{className:o.content},t),r.a.createElement(S.a,{className:o.editControls,m:1},a?r.a.createElement(D.a,{onClick:c},r.a.createElement(j.a,{color:"error"},"Retry?"),r.a.createElement(x.a,{icon:"sync",className:o.icon,color:l.palette.error.main})):r.a.createElement(D.a,{onClick:n},"Add",r.a.createElement(x.a,{icon:"paper-plane",className:o.icon})))))}),me="LOAD_CATEGORIES";var pe=function(){return function(e){e({type:me,payload:{request:{url:"/categories"}}}),e({type:q,payload:{request:{url:"/posts"}}})}},fe=a(99),Ee=a(57),be=a(22);Ee.b.add(be.l,be.j,be.e,be.c,be.b,be.a,be.d,be.f,be.k,be.h,be.m,be.g,be.i);var ve=Object(fe.a)({palette:{type:"dark"},overrides:{MuiDrawer:{paper:{width:"".concat(200,"px"),maxWidth:"".concat(200,"px")}}},typography:{useNextVariants:!0}}),ye=Object(d.a)(function(){return{"@global":{a:{textDecoration:"none",color:"inherit"}},nav:{width:200},content:{paddingLeft:ve.spacing(1)+200,paddingTop:ve.spacing(1),paddingRight:ve.spacing(1),width:"100%"}}}),he=Object(l.b)(function(e){return e})(function(e){var t=e.dispatch,a=ye();return Object(n.useEffect)(function(){return t(pe())},[t]),r.a.createElement(i.a,{theme:ve},r.a.createElement(u.a,null),r.a.createElement(m.a,null,r.a.createElement(s.a,{container:!0},r.a.createElement(s.a,{item:!0,className:a.nav},r.a.createElement(g,null)),r.a.createElement(s.a,{item:!0,className:a.content},r.a.createElement(p.c,null,r.a.createElement(p.a,{exact:!0,path:"/",component:ge}),r.a.createElement(p.a,{exact:!0,path:"/:category",component:Oe}),r.a.createElement(p.a,{exact:!0,path:"/:category/:postId",component:je}),r.a.createElement(p.a,{path:"*",component:Se}))))))}),ge=Object(l.b)(function(e){return{posts:e.posts}})(function(e){var t=e.posts;return r.a.createElement(V,{posts:t})}),Oe=Object(l.b)(function(e){return{posts:e.posts}})(Object(p.f)(function(e){var t=e.posts,a=e.match.params.category;return r.a.createElement(V,{posts:t?t.filter(function(e){return e.category===a}):null,category:a})})),je=Object(l.b)(function(e,t){var a=e.comments,n=e.posts,r=e.dispatch,c=t.match.params.postId;return{comments:a,post:n?n.filter(function(e){return e.id===c})[0]:null,dispatch:r}})(Object(p.f)(function(e){var t=e.dispatch,a=e.match,c=e.post,o=e.comments,l=a.params.postId;return Object(n.useEffect)(function(){t(function(e){var t=e.postId;return{type:K,postId:t,payload:{request:{url:"/posts/".concat(t,"/comments")}}}}({postId:l}))},[l,t]),r.a.createElement(S.a,null,c?r.a.createElement(r.a.Fragment,null,r.a.createElement(H,c),r.a.createElement(te,{comments:o,postId:l})):r.a.createElement(j.a,null,"No post found! It may have been deleted."))})),Se=function(){return r.a.createElement(j.a,null,"Not found! Please click one of the buttons in the sidebar to get back.")},we=Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));function Ce(e,t){navigator.serviceWorker.register(e).then(function(e){e.onupdatefound=function(){var a=e.installing;null!=a&&(a.onstatechange=function(){"installed"===a.state&&(navigator.serviceWorker.controller?(console.log("New content is available and will be used when all tabs for this page are closed. See https://bit.ly/CRA-PWA."),t&&t.onUpdate&&t.onUpdate(e)):(console.log("Content is cached for offline use."),t&&t.onSuccess&&t.onSuccess(e)))})}}).catch(function(e){console.error("Error during service worker registration:",e)})}var Ne=a(33),ke=a(43),Te=a(56),De=function(e,t){if(!e)return null;var a=t.id,n=Object(Te.a)(e);return e.map(function(e,t){return e.id===a&&n.splice(t,1)}),n},xe=function(e,t){if(!e)return null;var a=t.id,n=Object(Te.a)(e);return e.map(function(e,t){return e.id===a&&n.splice(t,1)}),n},Ie=Object(Ne.combineReducers)({categories:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"".concat(me,"_SUCCESS"):var a=t.payload.data.categories;return a||e;default:return e}},posts:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"".concat(q,"_SUCCESS"):var a=t.payload.data;return a||e;case A:if(!e)return null;var n=t.payload.request.data,r=n.id,c=n.option;return e.map(function(e){return e.id===r?Object(ke.a)({},e,{voteScore:"upVote"===c?e.voteScore+1:e.voteScore-1}):e});case W:var o=t.payload.request.data;return[].concat(Object(Te.a)(e),[Object(ke.a)({},o,{voteScore:1})]);case"".concat(W,"_FAIL"):return De(e,t.meta.previousAction.payload.request.data);case M:if(!e)return null;var l=t.payload.request.data,i=l.id,u=l.title,s=l.body;return e.map(function(e){return e.id===i?Object(ke.a)({},e,{title:u,body:s}):e});case _:return De(e,t.payload.request.data);default:return e}},comments:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"".concat(K,"_SUCCESS"):var a=t.payload.data;return a||{};case Q:if(!e)return null;var n=t.payload.request.data,r=n.id,c=n.option;return e.map(function(e){return e.id===r?Object(ke.a)({},e,{voteScore:"upVote"===c?e.voteScore+1:e.voteScore-1}):e});case X:var o=t.payload.request.data;return[].concat(Object(Te.a)(e),[Object(ke.a)({},o,{voteScore:1})]);case"".concat(X,"_FAIL"):return xe(e,t.meta.previousAction.payload.request.data);case Y:if(!e)return null;var l=t.payload.request.data,i=l.id,u=l.body;return e.map(function(e){return e.id===i?Object(ke.a)({},e,{body:u}):e});case Z:return xe(e,t.payload.request.data);default:return e}}}),Le=a(95),qe=a(96),Ae=a(97),We=a.n(Ae),Me=a(98),_e=a.n(Me),Pe=We.a.create({baseURL:"".concat(L.a),responseType:"json",headers:{Authorization:L.b,Accept:"application/json"}}),Re=Object(qe.composeWithDevTools)(Object(Ne.applyMiddleware)(Le.a,_e()(Pe))),Fe=Object(Ne.createStore)(Ie,Re);o.a.render(r.a.createElement(l.a,{store:Fe},r.a.createElement(he,null)),document.getElementById("root")),function(e){if("serviceWorker"in navigator){if(new URL("/fliddit",window.location.href).origin!==window.location.origin)return;window.addEventListener("load",function(){var t="".concat("/fliddit","/service-worker.js");we?(function(e,t){fetch(e).then(function(a){var n=a.headers.get("content-type");404===a.status||null!=n&&-1===n.indexOf("javascript")?navigator.serviceWorker.ready.then(function(e){e.unregister().then(function(){window.location.reload()})}):Ce(e,t)}).catch(function(){console.log("No internet connection found. App is running in offline mode.")})}(t,e),navigator.serviceWorker.ready.then(function(){console.log("This web app is being served cache-first by a service worker. To learn more, visit https://bit.ly/CRA-PWA")})):Ce(t,e)})}}()},45:function(e){e.exports={b:"A Fliddit user",a:"http://localhost:3001"}}},[[104,1,2]]]);
//# sourceMappingURL=main.e4c9bfc3.chunk.js.map